require 'spec_helper'

describe Headache::Document do
  let(:document) { build :document }
  let(:ach_file) { File.open('./spec/fixtures/ach').read }

  it 'can be dumped to a hash' do
    doc = described_class.parse(ach_file)
    expect(doc.to_h).to eq({:file_header=>{:record_type_code=>"1", :priority_code=>"01", :destination=>"          ", :origin=>"          ", :creation_date=>"151016", :creation_time=>"1543", :id_modifier=>"A", :record_size=>"094", :blocking_factor=>"10", :format_code=>"1", :destination_name=>"                       ", :origin_name=>"                       ", :reference_code=>"        "}, :batches=>[{:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000012"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000012"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000013"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000013"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000014"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000014"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000015"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000015"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000016"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000016"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000017"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000017"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000018"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000018"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000019"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000019"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000020"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000020"}}, {:batch_header=>{:record_type_code=>"5", :service_code=>"225", :company_name=>"                ", :discretionary=>"                    ", :company_identification=>"          ", :entry_class_code=>"   ", :entry_description=>"          ", :descriptive_date=>"151016", :effective_date=>"151016", :settlement_date=>"   ", :originator_status_code=>"1", :odfi_id=>"        ", :batch_number=>"0000021"}, :entries=>[{:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}, {:record_type_code=>"6", :transaction_code=>"AB", :routing_identification=>"55555555", :check_digit=>"5", :account_number=>"5555555555       ", :amount=>"0000010000", :internal_id=>"ABC123         ", :individual_name=>"BOB SMITH             ", :discretionary=>"  ", :addenda_record=>"0", :trace_number=>"DEF456         "}], :batch_control=>{:record_type_code=>"8", :service_code=>"225", :entry_count=>"000010", :entry_hash=>"5555555550", :total_debit=>"000000000000", :total_credit=>"000000100000", :company_identification=>"          ", :message_authentication_code=>"                   ", :reserved=>"      ", :odfi_id=>"        ", :batch_number=>"0000021"}}], :file_control=>{:record_type_code=>"9", :batch_count=>"000010", :block_count=>"000013", :entry_count=>"00000100", :entry_hash=>"5555555500", :total_debit=>"000000000000", :total_credit=>"000001000000", :reserved=>"                                       "}})
  end

  it 'generates the same document as it parses' do
    doc = described_class.parse(ach_file)
    expect(doc.generate).to eq(ach_file)
  end

  it 'generates a document where each line is exactly 94 characters' do
    document.generate.split(Headache::Document::LINE_SEPARATOR).each_with_index do |line, index|
      expect(line.length).to eq(94)
    end
  end
end
